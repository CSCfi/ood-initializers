<div class="notification notification-warning <%= "locked-project" if balance.locked %>" data-notification-type="balance" data-project="<%= balance.project -%>" <%== 'style="display: none;"' if balance.hide -%>>
  <% if balance.locked %>
    <i class="fas fa-lock notification-icon"></i>
  <% else %>
    <i class="fas fa-exclamation-triangle notification-icon"></i>
  <% end %>
  <div class="notification-content">
    <div class="d-flex justify-content-between">
      <h5 class="notification-title">Balance warning for <%= balance.project -%>
      <%
          locked_tooltip =
          if balance.locked
            "Project folder has been locked and job submission is disabled due to negative BUs, please contact CSC Service Desk for instructions on how to restore access."
          elsif balance.will_be_locked
            "Project folder will be locked due to negative BUs. Submitting jobs is not possible for this project."
          end
        %>
      <% if balance.locked %>
        <span class="info-tag" title="<%= locked_tooltip %>"> <i class="fas fa-lock" ></i> locked</span>
        <i class="fas fa-question-circle" title="<%= locked_tooltip %>"></i>
      <% elsif balance.will_be_locked && balance.grace_time_end.present? %>
        <span class="info-tag" title="<%= locked_tooltip %>"> <i class="fas fa-lock" ></i> will be locked on <%= balance.grace_time_end %></span>
        <i class="fas fa-question-circle" title="<%= locked_tooltip %>"></i>
      <% elsif balance.will_be_locked -%>
        <span class="info-tag" title="<%= locked_tooltip %>"> <i class="fas fa-lock"></i> will be locked</span>
        <i class="fas fa-question-circle" title="<%= locked_tooltip %>"></i>
      <% end %>
      </h5>
      <button type="button" class="btn btn-outline-secondary btn-sm notification-hide-button" title="Hide warning <% if CSCBalance.ignore_duration == 0 %>forever<% else %>for <%= CSCBalance.ignore_duration -%> day<%= CSCBalance.ignore_duration > 1 ? "s" : "" -%><% end %>"><i class="fas fa-eye-slash"></i> Hide</button>
    </div>
    <div class="notification-message">
      <p><%= balance.to_s %></p>
      <%= render( partial: "widgets/notifications/progress_bar", locals: { percent: balance.percent_usage }) %>
    </div>
  </div>
</div>
