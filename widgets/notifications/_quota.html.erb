<div class="notification notification-warning <%= "locked-project" if quota.locked %>" data-notification-type="quota" data-path="<%= quota.path -%>" data-type="<%= quota.resource_type -%>" <%== 'style="display: none;"' if quota.hide -%>>
  <% if quota.locked %>
    <i class="fas fa-lock notification-icon"></i>
  <% else %>
    <i class="fas fa-exclamation-triangle notification-icon"></i>
  <% end %>
  <div class="notification-content">
    <div class="d-flex justify-content-between">
      <h5 class="notification-title">Quota warning for <%= link_to OodAppkit.files.url(path: quota.path).to_s, class: "", target: "_blank" do -%>
        <%= quota.path %>
      <% end %>
      <%
          locked_tooltip =
          if quota.locked
            "Project folder has been locked and job submission is disabled, please contact CSC Service Desk for instructions on how to restore access."
          elsif quota.will_be_locked
            "Project folder will be locked. Submitting jobs is not possible for this project."
          end
        %>
      <% if quota.locked %>
        <span class="info-tag" title="<%= locked_tooltip %>"><i class="fas fa-lock"></i> locked</span>
        <i class="fas fa-question-circle" title="<%= locked_tooltip %>"></i>
      <% elsif quota.will_be_locked && quota.grace_time_end.present? %>
        <span class="info-tag" title="<%= locked_tooltip %>"><i class="fas fa-lock"></i> will be locked on <%= quota.grace_time_end %></span>
        <i class="fas fa-question-circle" title="<%= locked_tooltip %>"></i>
      <% elsif quota.will_be_locked -%>
        <span class="info-tag" title="<%= locked_tooltip %>"><i class="fas fa-lock"></i> will be locked</span>
        <i class="fas fa-question-circle" title="<%= locked_tooltip %>"></i>
      <% end %>
      </h5>
      <button type="button" class="btn btn-outline-secondary btn-sm notification-hide-button" title="Hide warning <% if CSCQuota.ignore_duration == 0 %>forever<% else %>for <%= CSCQuota.ignore_duration -%> day<%= CSCQuota.ignore_duration > 1 ? "s" : "" -%><% end %>"><i class="fas fa-eye-slash"></i> Hide</button>

    </div>
    <div class="notification-message">
      <p><%= quota.to_s %></p>
      <%= render( partial: "widgets/notifications/progress_bar", locals: { percent: quota.percent_total_usage }) -%>
    </div>
  </div>
</div>
